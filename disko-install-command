# NixOS Install Steps with Flakes, Disko, ZFS, Impermanence

# 1. Connect to the Internet
ping -c3 nixos.org
nmtui  # if not connected

# 2. Clone your config repo (GitHub) 
git clone https://github.com/c581756b61737a20506965637a6b65/My-nix-flakes /mnt/config
cd /mnt/config

# 3. (Optional) Wipe disk - WARNING: This erases the disk
wipefs -a /dev/nvme0n1

# 4. Run Disko to partition, format, and mount
nix-shell -p disko
disko --mode disko ./disko.nix

# 5. Link or copy flake to /mnt/etc/nixos
mkdir -p /mnt/etc
ln -s /mnt/config /mnt/etc/nixos

# OR copy:
# cp -r /mnt/config /mnt/etc/nixos

# 6. Confirm flake exists
ls /mnt/etc/nixos/flake.nix

# 7. Install NixOS using flake
nix-shell -p nixFlakes
nixos-install --flake /mnt/etc/nixos#I-use-nix-btw

# 8. (Optional) Set root password
nixos-enter
passwd
exit

# 9. Reboot into new system
reboot

